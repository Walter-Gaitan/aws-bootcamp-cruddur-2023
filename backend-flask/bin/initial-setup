#!/bin/bash

# Set variables
BIN_PATH="$(realpath .)"
DB_PATH="$BIN_PATH/db"
DDB_PATH="$BIN_PATH/ddb"

# Run db setup and catch errors
if source "$DB_PATH/setup"; then
  # Load schema and seed data if setup was successful
  source "$DDB_PATH/schema-load"
  source "$DDB_PATH/seed"
  ./"$DDB_PATH"/update_cognito_users_ids
else
  # If setup failed, print error message and exit script
  echo "Error running db setup. Schema load and seed will not be executed."
  exit 1
fi
